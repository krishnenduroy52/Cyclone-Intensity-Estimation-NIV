<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Home</title>
	</head>
	<body>			
		<script>
			function previewImage(event) {
				const input = event.target;
				const preview = document.getElementById('preview');
				const file = input.files[0];

				if (file) {
					const reader = new FileReader();
					reader.onload = function (e) {
						preview.src = e.target.result;
						preview.style.display = 'block';
					};
					reader.readAsDataURL(file);
				}
			}

			function uploadImage() {
				const form = document.getElementById('uploadForm');
				const formData = new FormData(form);

				fetch('/predict', {
					method: 'POST',
					body: formData
				})
				.then(res => {
					if (res.status != 200) {
						const resultDiv = document.getElementById('result');
						resultDiv.innerHTML = '<p> Error Message:'+res.message+'</p>';
					}
					return res.json();
					res.json();
				})
				.then(data => {
					const resultDiv = document.getElementById('result');
					resultDiv.innerHTML = ' <p>Result Array 1:'+JSON.stringify(data.array1)+'</p><p>Result Array 2:'+JSON.stringify(data.array2)+'</p>';
				})
				.catch(error => console.error('Error:', error));
			}
		</script>
		
		<div align="center">
			<h1> Cyclone Intensity Estimation </h1>
			<form id="uploadForm" enctype="multipart/form-data">
				<input type="file" name="image" accept="image/.jpg" onchange="previewImage(event)">
				<button type="button" onclick="uploadImage()">Upload Image</button>
			</form>
			<img id="preview" style="display: none;">
			<div id="result"></div>
		</div>
	</body>
</html>